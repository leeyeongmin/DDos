<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pay">
	<select id="Nonpayment_book" resultType="rental" parameterType="string">
		SELECT B.book_title, R.isbn , to_char(R.rental_date,'yyyy-mm-dd') "rental_date" ,
		to_char(R.due_date, 'yyyy-mm-dd') "due_date", to_char(R.return_date,'yyyy-mm-dd') "return_date",
		CEIL(sysdate - R.due_date) "overdue" , CEIL((sysdate - R.due_date)) * 10 "money" , R.member_id  
		FROM  Rental R LEFT OUTER JOIN Book B
		on (R.isbn = B.isbn)
		where return_date is not null
		<![CDATA[and due_date <  sysdate
		and member_id = #{value}]]>
	</select>

</mapper>